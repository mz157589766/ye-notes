(window.webpackJsonp=window.webpackJsonp||[]).push([[137],{526:function(s,n,a){"use strict";a.r(n);var e=a(0),t=Object(e.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("p",[n("code",[s._v("Rancher CLI")]),s._v("是一个统一的工具，可用于与 Rancher 进行交互。借助于此工具，我们可以使用命令行来操作 Rancher 并管理其下的资源。")]),s._v(" "),n("ul",[n("li",[s._v("1、下载 rancher-cli 工具")])]),s._v(" "),n("p",[s._v("可以通过官方的"),n("a",{attrs:{href:"https://www.cnrancher.com/docs/rancher/v2.x/cn/install-prepare/download/",target:"_blank",rel:"noopener noreferrer"}},[s._v("文件下载"),n("OutboundLink")],1),s._v("页面进行下载，也可以直接在首页右下角的下载 cli 进行下载，这里直接通过命令方式进行下载。")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@jenkins ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://releases.rancher.com/cli2/v2.2.0/rancher-linux-amd64-v2.2.0.tar.gz\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@jenkins ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" xf rancher-linux-amd64-v2.2.0.tar.gz\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ul",[n("li",[s._v("2、配置进系统中")])]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" rancher-v2.2.0/rancher /usr/bin/rancher\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf rancher-v2.2.0/\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ul",[n("li",[s._v("3、测试登录")])]),s._v(" "),n("p",[s._v("新建用户获取 tonken：")]),s._v(" "),n("p",[n("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/01c8cfc97b23eed5.jpg",alt:""}})]),s._v(" "),n("p",[s._v("创建一个永不过期的 token，以用于验证使用。")]),s._v(" "),n("p",[n("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/f3b251382c557812.jpg",alt:""}})]),s._v(" "),n("p",[s._v("使用如下命令进行登陆：")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@jenkins ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ rancher login https://rancher.com/v3 --token token-fkgj6:gd2z99wnfgc2zw9pw969rppgbnrfwg7l59l4gccqp5wmdc6vd27r5l\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("code",[s._v("注意")]),s._v("：这里测试的主机需要能够访问"),n("code",[s._v("rancher.com")]),s._v("，如果都在内网环境中，那么可以直接把域名对应解析写入到主机"),n("code",[s._v("hosts")]),s._v("中。")]),s._v(" "),n("p",[s._v("注意，还需要安装 kubectl 命令，否则执行相关操作时会报如下错误：")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("FATA"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("0000"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" kubectl is required to be "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" your path to use this command. See https://kubernetes.io/docs/tasks/tools/install-kubectl/ "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" info. Error: exec: "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"kubectl"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" executable "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" not found "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("随便执行一下命令验证一下。")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@jenkins ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ rancher kubectl get "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v("\nNAME            STATUS   ROLES                      AGE   VERSION\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".106.3   Ready    controlplane,etcd,worker   32m   v1.11.6\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".106.4   Ready    controlplane,etcd,worker   32m   v1.11.6\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".106.5   Ready    controlplane,etcd,worker   32m   v1.11.6\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("借此机会来个安装应用的定妆照！")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@jenkins ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$rancher")]),s._v(" kubectl get pod --all-namespaces\nNAMESPACE       NAME                                        READY   STATUS      RESTARTSAGE\ncattle-system   cattle-cluster-agent-5c9d5cbb87-nlf8x       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     016m\ncattle-system   cattle-node-agent-6ncnb                     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     016m\ncattle-system   cattle-node-agent-cdpww                     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     016m\ncattle-system   cattle-node-agent-l48m8                     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     016m\ncattle-system   rancher-bdf49fb9-7qhgp                      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     131m\ncattle-system   rancher-bdf49fb9-hf6tm                      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     031m\ncattle-system   rancher-bdf49fb9-xmbv7                      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     131m\ningress-nginx   default-http-backend-797c5bc547-nnqzt       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     034m\ningress-nginx   nginx-ingress-controller-mn9jl              "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     034m\ningress-nginx   nginx-ingress-controller-rrm8z              "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     034m\ningress-nginx   nginx-ingress-controller-vt8lx              "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     034m\nkube-system     canal-9r7jt                                 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("/3     Running     034m\nkube-system     canal-b86n6                                 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("/3     Running     034m\nkube-system     canal-lqk8g                                 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("/3     Running     034m\nkube-system     cert-manager-cert-manager-8f55cc84b-z84kw   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("/2     Running     031m\nkube-system     kube-dns-7588d5b5f5-dnqk7                   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("/3     Running     034m\nkube-system     kube-dns-autoscaler-5db9bbb766-cfqcg        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     034m\nkube-system     metrics-server-97bc649d5-lkn57              "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     034m\nkube-system     rke-ingress-controller-deploy-job-s5ss8     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     Completed   034m\nkube-system     rke-kubedns-addon-deploy-job-p2hjb          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     Completed   034m\nkube-system     rke-metrics-addon-deploy-job-fqvfm          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     Completed   034m\nkube-system     rke-network-plugin-deploy-job-7zr8v         "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     Completed   034m\nkube-system     tiller-deploy-8cb5b5f5c-qzk5z               "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     032m\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br")])]),n("p",[s._v("OK，看到能够这样执行命令，就可以了，后边的流水线工作就不用发愁了。")])])}),[],!1,null,null,null);n.default=t.exports}}]);