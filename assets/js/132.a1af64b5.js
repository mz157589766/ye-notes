(window.webpackJsonp=window.webpackJsonp||[]).push([[132],{521:function(s,n,a){"use strict";a.r(n);var e=a(0),t=Object(e.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h3",{attrs:{id:"_1-安装k8s"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装k8s"}},[s._v("#")]),s._v(" 1，安装k8s")]),s._v(" "),n("ul",[n("li",[s._v("1、切换到rancher用户")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("su - rancher\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("blockquote",[n("p",[n("code",[s._v("注意：")]),s._v("必须使用普通用户操作，否则后边的操作会报下边的错：")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("Please check if the configured user can execute `docker ps` on the node, and if the SSH server version is at least version 6.7 or higher. If youare using RedHat/CentOS, you can't use the user `root`. Please refer to the documentation for more instructions. Error: ssh: rejected: administratively prohibited (open failed)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("2、创建rancher集群配置文件：")])]),s._v(" "),n("div",{staticClass:"language-yaml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-yaml"}},[n("code",[s._v("cat "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),s._v(" rancher"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("cluster.yml << EOF\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("nodes")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("address")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 192.168.10.3\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("user")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" rancher\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("role")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("controlplane"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("worker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("etcd"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("address")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 192.168.10.4\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("user")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" rancher\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("role")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("controlplane"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("worker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("etcd"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("address")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 192.168.10.5\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("user")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" rancher\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("role")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("controlplane"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("worker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("etcd"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("services")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("etcd")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("snapshot")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("creation")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 6h\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("retention")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 24h\nEOF\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])]),n("ul",[n("li",[n("ol",[n("li",[n("code",[s._v("address")]),s._v("：公共域名或IP地址")]),s._v(" "),n("li",[n("code",[s._v("user")]),s._v("：可以运行docker命令的用户，需要是普通用户。")]),s._v(" "),n("li",[n("code",[s._v("role")]),s._v("：分配给节点的Kubernetes角色列表")]),s._v(" "),n("li",[n("code",[s._v("ssh_key_path")]),s._v("：用于对节点进行身份验证的SSH私钥的路径（默认为~/.ssh/id_rsa）")])])]),s._v(" "),n("li",[n("p",[s._v("3、启动集群")])])]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("$ rke up --config ./rancher-cluster.yml\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("如果这一步报错下边的内容：")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" the SSH server version is at least version "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6.7")]),s._v(" or higher. If you are using RedHat/CentOS, you can't use the user "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("root"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" Please refer to the documentation "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" instructions\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("则可能是系统的"),n("code",[s._v("openssh")]),s._v("版本太低，只需执行如下命令升级即可：")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("rancher@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" -V\nOpenSSH_6.6.1p1, OpenSSL "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v(".1e-fips "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" Feb "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2013")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#低于上边要求的6.7")]),s._v("\n \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("rancher@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ yum -y update openssh\n \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ssh")]),s._v(" -V\nOpenSSH_7.4p1, OpenSSL "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v(".2k-fips  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("26")]),s._v(" Jan "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[s._v("然后再切回rancher用户执行安装即可！")]),s._v(" "),n("p",[s._v("完成后，它应显示："),n("code",[s._v("Finished building Kubernetes cluster successfully。")]),s._v("并且已经创建了一个文件"),n("code",[s._v("kube_config_rancher-cluster.yml")]),s._v("，这个文件包含kubectl和helm访问K8S的凭据。")]),s._v(" "),n("ul",[n("li",[s._v("4、配置环境变量：")])]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" - root\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/profile\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("KUBECONFIG")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/home/rancher/kube_config_rancher-cluster.yml\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("保存，并执行：")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /etc/profile\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("保存"),n("code",[s._v("kube_config_rancher-cluster.yml")]),s._v("和"),n("code",[s._v("rancher-cluster.yml")]),s._v("文件的副本,后期维护和升级Rancher实例时将会用到。")]),s._v(" "),n("ul",[n("li",[s._v("5、通过kubectl测试您的连接，并查看您的所有节点是否处于Ready状态")])]),s._v(" "),n("p",[s._v("先配置一下kubectl的命令补全功能。")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("$ "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"source <(kubectl completion bash)"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" ~/.bashrc\n$ "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" ~/.bashrc\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" - rancher\n$ "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"source <(kubectl completion bash)"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" ~/.bashrc\n$ "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" ~/.bashrc\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("然后查看节点状态。")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@node1 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" - rancher\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("rancher@node1 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ kubectl get nodes\nNAME            STATUS   ROLES                      AGE   VERSION\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.3   Ready    controlplane,etcd,worker   1m    v1.11.6\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.4   Ready    controlplane,etcd,worker   1m    v1.11.6\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.5   Ready    controlplane,etcd,worker   1m    v1.11.6\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[s._v("由于需要联网下载docker镜像文件，所以需要一段时间才能安装好，10-30分钟左右。")]),s._v(" "),n("ul",[n("li",[s._v("6、检查集群Pod的运行状况")])]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("rancher@node1 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ kubectl get pods --all-namespaces\nNAMESPACE       NAME                                      READY   STATUS      RESTARTS   AGE\ningress-nginx   default-http-backend-797c5bc547-nnqzt     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          1m\ningress-nginx   nginx-ingress-controller-mn9jl            "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          1m\ningress-nginx   nginx-ingress-controller-rrm8z            "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          1m\ningress-nginx   nginx-ingress-controller-vt8lx            "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          1m\nkube-system     canal-9r7jt                               "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("/3     Running     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          1m\nkube-system     canal-b86n6                               "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("/3     Running     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          1m\nkube-system     canal-lqk8g                               "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("/3     Running     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          1m\nkube-system     kube-dns-7588d5b5f5-dnqk7                 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("/3     Running     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          1m\nkube-system     kube-dns-autoscaler-5db9bbb766-cfqcg      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          1m\nkube-system     metrics-server-97bc649d5-lkn57            "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          1m\nkube-system     rke-ingress-controller-deploy-job-s5ss8   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     Completed   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          1m\nkube-system     rke-kubedns-addon-deploy-job-p2hjb        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     Completed   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          1m\nkube-system     rke-metrics-addon-deploy-job-fqvfm        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     Completed   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          1m\nkube-system     rke-network-plugin-deploy-job-7zr8v       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     Completed   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          1m\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])]),n("p",[s._v("保存kube_config_rancher-cluster.yml和rancher-cluster.yml文件的副本,您将需要这些文件来维护和升级Rancher实例。")]),s._v(" "),n("h3",{attrs:{id:"_2-helm"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-helm"}},[s._v("#")]),s._v(" 2，Helm")]),s._v(" "),n("blockquote",[n("p",[s._v("Helm有两个部分：Helm客户端(helm)和Helm服务端(Tiller)。")]),s._v(" "),n("p",[s._v("使用Helm在集群上安装tiller服务以管理charts，由于RKE默认启用RBAC, 因此我们需要使用kubectl来创建一个serviceaccount，clusterrolebinding才能让tiller具有部署到集群的权限。")])]),s._v(" "),n("p",[s._v("1、在kube-system命名空间中创建ServiceAccount：")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("kubectl -n kube-system create serviceaccount tiller\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("2、创建ClusterRoleBinding以授予tiller帐户对集群的访问权限：")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("kubectl create clusterrolebinding tiller --clusterrole cluster-admin --serviceaccount"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("kube-system:tiller\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("3、安装Helm Server(Tiller)")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("helm init --service-account tiller   --tiller-image registry.cn-hangzhou.aliyuncs.com/eryajf/tiller:v2.12.0 --stable-repo-url https://kubernetes.oss-cn-hangzhou.aliyuncs.com/charts\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("4、安装Tiller金丝雀版本")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("helm init --service-account tiller --canary-image\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("5，需要修改成国内镜像（可能需要delete再重新init）")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("TILLER_TAG")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("v2.12.0\nkubectl --namespace"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("kube-system "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" image deployments/tiller-deploy "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("tiller")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("hongxiaolu/tiller:"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$TILLER_TAG")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h3",{attrs:{id:"_3-helm安装rancher"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-helm安装rancher"}},[s._v("#")]),s._v(" 3，helm安装rancher")]),s._v(" "),n("p",[s._v("1，添加Chart仓库地址")]),s._v(" "),n("p",[s._v("使用helm repo add命令添加Rancher chart仓库地址,访问Rancher tag和Chart版本\n替换为您要使用的Helm仓库分支(即latest或stable）。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("helm repo add rancher-stable https://releases.rancher.com/server-charts/stable\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("2，"),n("a",{attrs:{href:"https://www.cnrancher.com/docs/rancher/v2.x/cn/installation/server-installation/ha-install/helm-rancher/rancher-install/",target:"_blank",rel:"noopener noreferrer"}},[s._v("安装证书管理器（可选）"),n("OutboundLink")],1)]),s._v(" "),n("ul",[n("li",[s._v("1、只有Rancher自动生成的证书和LetsEncrypt颁发的证书才需要cert-manager。如果是你自己的证书，可使用ingress.tls.source=secret参数指定证书，并跳过此步骤。")])]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("helm "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" stable/cert-manager "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --name cert-manager "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --namespace kube-system\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("ul",[n("li",[s._v("2、Rancher自动生成证书")])]),s._v(" "),n("p",[s._v("默认情况下，Rancher会自动生成CA根证书并使用cert-manager颁发证书以访问Rancher server界面。")]),s._v(" "),n("p",[s._v("唯一的要求是将hostname配置为访问Rancher的域名地址，使用这种SSL证书配置方式需提前安装证书管理器。")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("helm "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" rancher-stable/rancher "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --name rancher "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --namespace cattle-system "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --set "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("hostname")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rancher.com\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[n("code",[s._v("rancher.com")]),s._v("就是后面访问rancher的域名，需要在/etc/hosts文件中添加关联（所有主机）：")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@node1 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.10.2 rancher.com"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /etc/hosts\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@node2 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.10.2 rancher.com"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /etc/hosts\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@node3 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.10.2 rancher.com"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /etc/hosts\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@nginx ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.10.2 rancher.com"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /etc/hosts\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("由于我们通过hosts文件来添加映射，所以需要为Agent Pod添加主机别名(/etc/hosts)：")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("kubectl -n cattle-system patch  deployments cattle-cluster-agent --patch "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{\n    "spec": {\n        "template": {\n            "spec": {\n                "hostAliases": [\n                    {\n                        "hostnames":\n                        [\n                            "rancher.com"\n                        ],\n                            "ip": "192.168.10.2"\n                    }\n                ]\n            }\n        }\n    }\n}\'')]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])]),n("p",[s._v("这一步如果马上执行，可能会报错："),n("code",[s._v('Error from server (NotFound): deployments.extensions "cattle-cluster-agent" not found')]),s._v("，这个deployment是上一步install时创建的，比较慢，耐心等待一下，这个时候也可以先跳过这里，去到后边，简单配置一下，访问一下rancher的界面。")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("kubectl -n cattle-system patch  daemonsets cattle-node-agent --patch "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{\n    "spec": {\n        "template": {\n            "spec": {\n                "hostAliases": [\n                    {\n                        "hostnames":\n                        [\n                            "rancher.com"\n                        ],\n                            "ip": "192.168.100.22"\n                    }\n                ]\n            }\n        }\n    }\n}\'')]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])]),n("h3",{attrs:{id:"_4-登录rancher管理端"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-登录rancher管理端"}},[s._v("#")]),s._v(" 4，登录rancher管理端")]),s._v(" "),n("ul",[n("li",[s._v("1、同样将刚刚的域名映射关系写入到Windows主机的hosts文件。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("192.168.10.2 rancher.com\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("2、使用域名访问https://rancher.com")])]),s._v(" "),n("p",[n("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/a872dafdd0233f17.jpg",alt:"image"}})]),s._v(" "),n("p",[s._v("输入：admin/admin，进入首页界面。")]),s._v(" "),n("p",[s._v("刚进入，会看到一个问题，"),n("code",[s._v("Waiting for server-url setting to be set")]),s._v("。")]),s._v(" "),n("p",[n("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/3de5d924ed4c9472.jpg",alt:"image"}})]),s._v(" "),n("p",[s._v("报这个问题的原因就是刚刚创建的"),n("code",[s._v("cattle-cluster-agent")]),s._v("还没有被创建成功，同样耐心等待即可。这个时候可以随便点点看看先。这个过程与自己的网络有关，这时也可以在node1主机上，通过如下命令进行一个监控。")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("rancher@node1 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ kubectl get -n cattle-system pod -w\nNAME                     READY   STATUS    RESTARTS   AGE\nrancher-bdf49fb9-7qhgp   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("          12m\nrancher-bdf49fb9-hf6tm   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          12m\nrancher-bdf49fb9-xmbv7   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("          12m\ncattle-cluster-agent-7b54db4bc8-r4blg   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1   Pending   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     0s\ncattle-cluster-agent-7b54db4bc8-r4blg   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1   Pending   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     0s\ncattle-cluster-agent-7b54db4bc8-r4blg   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1   ContainerCreating   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     0s\ncattle-node-agent-mskmb   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1   Pending   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     0s\ncattle-node-agent-2cmww   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1   Pending   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     0s\ncattle-node-agent-kkpvn   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1   Pending   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     0s\ncattle-node-agent-mskmb   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1   ContainerCreating   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     0s\ncattle-node-agent-kkpvn   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1   ContainerCreating   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     0s\ncattle-node-agent-2cmww   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1   ContainerCreating   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     0s\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("p",[s._v("在我这里，等了十分钟左右，才开始正式的部署。这个时候，可以返回到上边，将那两条命令导入进去。")]),s._v(" "),n("p",[s._v("然后再看rancher，就不会报连接问题了。")]),s._v(" "),n("p",[n("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/51f18fab18d54ec0.jpg",alt:"image"}})]),s._v(" "),n("h3",{attrs:{id:"_5-安装rancher-cli"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-安装rancher-cli"}},[s._v("#")]),s._v(" 5，安装rancher-cli")]),s._v(" "),n("ul",[n("li",[s._v("1、下载rancher-cli工具")])]),s._v(" "),n("p",[s._v("可以通过首页右下角的下载cli进行下载，这里直接通过命令方式进行下载。通过这个友好的cli，我们可以完成很多自动化的事情，包括后续的CI/CD也将依赖它来完成。")]),s._v(" "),n("p",[s._v("所以我下边的试验干脆就在上边准备的nginx主机上进行，后续的Jenkins也在这里进行。")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@nginx ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://releases.rancher.com/cli2/v2.0.6/rancher-linux-amd64-v2.0.6.tar.gz\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@nginx ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" zxvf rancher-linux-amd64-v2.0.6.tar.gz\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ul",[n("li",[s._v("2、配置变量")])]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" rancher-v2.0.6/rancher /usr/bin/rancher\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf rancher-v2.0.6/\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ul",[n("li",[s._v("3、测试登录")])]),s._v(" "),n("p",[s._v("新建用户获取tonken：")]),s._v(" "),n("p",[n("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/01c8cfc97b23eed5.jpg",alt:"image"}})]),s._v(" "),n("p",[s._v("创建一个永不过期的token，以用于验证使用。")]),s._v(" "),n("p",[n("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/f3b251382c557812.jpg",alt:"image"}})]),s._v(" "),n("p",[s._v("使用如下命令进行登陆：")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@nginx ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ rancher login https://rancher.com/v3 --token token-fkgj6:gd2z99wnfgc2zw9pw969rppgbnrfwg7l59l4gccqp5wmdc6vd27r5l\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("blockquote",[n("p",[s._v("注意，还需要安装kubectl命令，否则执行相关操作时会报如下错误：")])]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("FATA"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("0000"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" kubectl is required to be "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" your path to use this command. See https://kubernetes.io/docs/tasks/tools/install-kubectl/ "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" info. Error: exec: "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"kubectl"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" executable "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" not found "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("所以需要安装才行，怎样安装，可参考上边的操作。")]),s._v(" "),n("p",[s._v("随便执行一下命令验证一下。")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@nginx ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ rancher kubectl get "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v("\nNAME            STATUS   ROLES                      AGE   VERSION\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.3   Ready    controlplane,etcd,worker   32m   v1.11.6\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.4   Ready    controlplane,etcd,worker   32m   v1.11.6\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.5   Ready    controlplane,etcd,worker   32m   v1.11.6\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("借此机会来个安装应用的定妆照！")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@nginx ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$rancher")]),s._v(" kubectl get pod --all-namespaces\nNAMESPACE       NAME                                        READY   STATUS      RESTARTSAGE\ncattle-system   cattle-cluster-agent-5c9d5cbb87-nlf8x       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     016m\ncattle-system   cattle-node-agent-6ncnb                     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     016m\ncattle-system   cattle-node-agent-cdpww                     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     016m\ncattle-system   cattle-node-agent-l48m8                     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     016m\ncattle-system   rancher-bdf49fb9-7qhgp                      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     131m\ncattle-system   rancher-bdf49fb9-hf6tm                      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     031m\ncattle-system   rancher-bdf49fb9-xmbv7                      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     131m\ningress-nginx   default-http-backend-797c5bc547-nnqzt       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     034m\ningress-nginx   nginx-ingress-controller-mn9jl              "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     034m\ningress-nginx   nginx-ingress-controller-rrm8z              "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     034m\ningress-nginx   nginx-ingress-controller-vt8lx              "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     034m\nkube-system     canal-9r7jt                                 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("/3     Running     034m\nkube-system     canal-b86n6                                 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("/3     Running     034m\nkube-system     canal-lqk8g                                 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("/3     Running     034m\nkube-system     cert-manager-cert-manager-8f55cc84b-z84kw   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("/2     Running     031m\nkube-system     kube-dns-7588d5b5f5-dnqk7                   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("/3     Running     034m\nkube-system     kube-dns-autoscaler-5db9bbb766-cfqcg        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     034m\nkube-system     metrics-server-97bc649d5-lkn57              "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     034m\nkube-system     rke-ingress-controller-deploy-job-s5ss8     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     Completed   034m\nkube-system     rke-kubedns-addon-deploy-job-p2hjb          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     Completed   034m\nkube-system     rke-metrics-addon-deploy-job-fqvfm          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     Completed   034m\nkube-system     rke-network-plugin-deploy-job-7zr8v         "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     Completed   034m\nkube-system     tiller-deploy-8cb5b5f5c-qzk5z               "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     032m\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br")])]),n("p",[s._v("OK，看到能够这样执行命令，就可以了，后边的流水线工作就不用发愁了。")]),s._v(" "),n("h2",{attrs:{id:"_6-参考。"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-参考。"}},[s._v("#")]),s._v(" 6，参考。")]),s._v(" "),n("p",[s._v("http://uee.me/aMRVU\nhttp://uee.me/aMRVT")])])}),[],!1,null,null,null);n.default=t.exports}}]);