(window.webpackJsonp=window.webpackJsonp||[]).push([[141],{530:function(s,a,n){"use strict";n.r(a);var t=n(0),e=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("这应该是第二次发力准备深入研究一下ldap这个东东，以往的工作生活中，也曾着手研究过，当时照着网上的文档也算是部署了出来，接着进入实际配置的时候，立刻就被其中各个名词给迷惑，瞬间坠入五里雾，晕晕乎乎不得其法。")]),s._v(" "),a("p",[s._v("这次幸得一些工作中实际场景的借鉴，以及博客读者杨哥的倾情分享，让我彻底来了激情，一股脑研究下去，无论艰辛，哪管黑夜白天，现在，不敢说自己已经精通，但是日常运维使用，基本上是足够了，特别来进行分享，希望通过几篇文章，能够深入浅出地把这个好用且大大提高效率的工具给讲明白。")]),s._v(" "),a("p",[s._v("我想，之前之所以不能够拿下他，还是方法不够得当，在还没有熟悉软件的时候，就被网上许多介绍概念的文章给绕晕，因此，这次的文章，则先把各种概念抛到一边，尽管照着文档做下去，只把文档做上两三遍，则所谓的七七八八的概念，也就自然了解了。")]),s._v(" "),a("p",[s._v("那么，废话不多说，直接来进入部署工作。")]),s._v(" "),a("h2",{attrs:{id:"_1-准备工作。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-准备工作。"}},[s._v("#")]),s._v(" 1，准备工作。")]),s._v(" "),a("p",[s._v("准备一台环境干净的"),a("code",[s._v("CentOS-7.4")]),s._v("主机，主机IP为"),a("code",[s._v("10.3.0.42")]),s._v("。")]),s._v(" "),a("p",[s._v("关闭防火墙，selinux这些就不细说了。")]),s._v(" "),a("p",[s._v("我个人的域名为eryajf.net，我给ldap服务配置一个域名为"),a("code",[s._v("ldap.eryajf.net")]),s._v("。各位跟随文章做的同学，暂时可以先与我保持一致，以免出现不可预知的错误。")]),s._v(" "),a("p",[s._v("时间同步。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("yum -y "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" ntpdate "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" ntpdate -u cn.pool.ntp.org\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("将域名解析写入到hosts。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10.3.0.42    ldap.eryajf.net"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /etc/hosts\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"_2-安装。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装。"}},[s._v("#")]),s._v(" 2，安装。")]),s._v(" "),a("ul",[a("li",[s._v("yum安装openldap，并采用"),a("code",[s._v("cn=config")]),s._v("方式（修改配置会立即生效，不用重启slapd）")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y openldap openldap-clients openldap-devel openldap-servers compat-openldap migrationtools\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("准备BDB数据库文件")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" /usr/share/openldap-servers/DB_CONFIG.example /var/lib/ldap/DB_CONFIG\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" ldap:ldap /var/lib/ldap/DB_CONFIG\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[s._v("启动并加入开机自启动")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("systemctl start slapd\nsystemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" slapd\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"_3-基础配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-基础配置"}},[s._v("#")]),s._v(" 3，基础配置")]),s._v(" "),a("ul",[a("li",[s._v("生成openldap的管理密码"),a("code",[s._v("eryajf@123")]),s._v("（记下来，下面将用到）")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@openldap-server ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# slappasswd")]),s._v("\nNew password: \nRe-enter new password: \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("SSHA"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("5KqLmqUXoiq/I3nDByp2NKDNjc4STyjW\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("ul",[a("li",[s._v("编写ldif文件（填入上面生成的ssha为olcRootPW密码）")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" chrootpw.ldif \ndn: "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("olcDatabase")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("config,cn"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("config\nchangetype: modify\nadd: olcRootPW\nolcRootPW: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("SSHA"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("5KqLmqUXoiq/I3nDByp2NKDNjc4STyjW "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#填入上面生成的ssha")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("ul",[a("li",[s._v("导入ldif文件")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@openldap-server ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ldapadd -Y EXTERNAL -H ldapi:/// -f chrootpw.ldif")]),s._v("\nSASL/EXTERNAL authentication started\nSASL username: "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("gidNumber")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("+uidNumber"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",cn"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("peercred,cn"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("external,cn"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("auth\nSASL SSF: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nmodifying entry "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"olcDatabase={0}config,cn=config"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("ul",[a("li",[s._v("导入基础的Schemas （openldap的基础模块在/etc/openldap/schema/目录里面）")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/cosine.ldif \nldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/nis.ldif \nldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/inetorgperson.ldif\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h2",{attrs:{id:"_4-配置openldap的条目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-配置openldap的条目"}},[s._v("#")]),s._v(" 4，配置openldap的条目")]),s._v(" "),a("ul",[a("li",[s._v("先准备一个openldap 根DN的管理密码("),a("code",[s._v("eryajf@456")]),s._v(")，然后设置你的RootDN名字在openldap的数据库中")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@openldap-server ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# slappasswd")]),s._v("\nNew password: \nRe-enter new password: \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("SSHA"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("sA4tp2fDiU/DVMfYTc65ugQDqaNyt3ai\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("ul",[a("li",[s._v("编写RootDN的ldif文件（cn=admin,dc=eryajf,dc=net）")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" chdomain.ldif\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# replace to your own domain name for "dc=***,dc=***" section')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# specify the password generated above for "olcRootPW" section')]),s._v("\ndn: "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("olcDatabase")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("monitor,cn"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("config\nchangetype: modify\nreplace: olcAccess\nolcAccess: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("to * by dn.base"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("read")]),s._v(" by dn.base"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cn=admin,dc=eryajf,dc=net"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("read")]),s._v(" by * none\ndn: "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("olcDatabase")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("hdb,cn"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("config\nchangetype: modify\nreplace: olcSuffix\nolcSuffix: "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("dc")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("eryajf,dc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("net\ndn: "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("olcDatabase")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("hdb,cn"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("config\nchangetype: modify\nreplace: olcRootDN\nolcRootDN: "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cn")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("admin,dc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("eryajf,dc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("net\ndn: "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("olcDatabase")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("hdb,cn"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("config\nchangetype: modify\nadd: olcRootPW\nolcRootPW: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("SSHA"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("sA4tp2fDiU/DVMfYTc65ugQDqaNyt3ai\ndn: "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("olcDatabase")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("hdb,cn"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("config\nchangetype: modify\nadd: olcAccess\nolcAccess: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("to "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("attrs")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("userPassword,shadowLastChange by\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("dn")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cn=admin,dc=eryajf,dc=net"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("write")]),s._v(" by anonymous auth by self "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("write")]),s._v(" by * none\nolcAccess: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("to dn.base"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(" by * "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("read")]),s._v("\nolcAccess: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("to * by "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("dn")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cn=admin,dc=eryajf,dc=net"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("write")]),s._v(" by * "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("read")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br")]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br")])]),a("ul",[a("li",[s._v("导入定义RootDN的ldif文件")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("ldapmodify -Y EXTERNAL -H ldapi:/// -f chdomain.ldif\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("编写基础的domain条目的ldif")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" basedomain.ldif\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# replace to your own domain name for "dc=***,dc=***" section')]),s._v("\ndn: "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("dc")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("eryajf,dc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("net\nobjectClass: "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("top")]),s._v("\nobjectClass: dcObject\nobjectclass: organization\no: eryajf net\ndc: eryajf\ndn: "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cn")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("admin,dc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("eryajf,dc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("net\nobjectClass: organizationalRole\ncn: admin\ndescription: Directory admin\ndn: "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ou")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("People,dc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("eryajf,dc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("net\nobjectClass: organizationalUnit\nou: People\ndn: "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ou")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Group,dc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("eryajf,dc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("net\nobjectClass: organizationalUnit\nou: Group\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")])]),a("ul",[a("li",[s._v("导入基础的domain条目文件")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("ldapadd -x -D "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cn")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("admin,dc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("eryajf,dc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("net -W -f basedomain.ldif    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#这里会要求输入openldap数据库的密码，也就是设置的第二个密码")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"_5-验证是否正常启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-验证是否正常启动"}},[s._v("#")]),s._v(" 5，验证是否正常启动")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#验证查看slapd服务是否启动，并监听389端口")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" slapd\nss -tnl "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("389")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看服务器openldap目录树信息")]),s._v("\nldapsearch -x -b "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dc=eryajf,dc=net"')]),s._v(" -H ldap://127.0.0.1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("到这里，服务端就部署好了，整个过程不算复杂，只需要细心做好配置即可。")]),s._v(" "),a("p",[a("a",{attrs:{href:"http://t.eryajf.net/imgs/2021/09/98c771d4c82bbdbd.jpg",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/98c771d4c82bbdbd.jpg",alt:"img"}}),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"_6-一键部署脚本。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-一键部署脚本。"}},[s._v("#")]),s._v(" 6，一键部署脚本。")]),s._v(" "),a("p",[s._v("在GitHub上也有人配好的docker方案，所以事实上也可以通过docker来进行部署。docker部署非常简单，首先在干净的主机上安装docker环境，然后运行如下脚本。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash -e")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SERVICE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ldap-service\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("HOST_NAME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ldap-server\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LDAP_DOMAIN")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("eryajf.net\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LDAP_DC")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("eryajf\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LDAP_DC_ORG")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("net\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NETWORK_ADAPTER")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("eth0\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PASSWORD")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("123465")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("OPENLDAP")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.2.0"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PHPLDAPADMIN")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0.7.1"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("HTTPS_PORT")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("OPENLDAP_PORT")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("389")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -p "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${OPENLDAP_PORT}")]),s._v(":389 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --name "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${SERVICE}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --hostname "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${HOST_NAME}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --env "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LDAP_ORGANISATION")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"WPT-Group"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --env "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LDAP_DOMAIN")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${LDAP_DOMAIN}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --env "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LDAP_ADMIN_PASSWORD")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${PASSWORD}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --detach osixia/openldap:"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${OPENLDAP}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -p "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${HTTPS_PORT}")]),s._v(":80 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --name "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${SERVICE}")]),s._v("-admin "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --hostname "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${HOST_NAME}")]),s._v("-admin "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --link "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${SERVICE}")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${HOST_NAME}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --env "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PHPLDAPADMIN_LDAP_HOSTS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${HOST_NAME}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --env "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PHPLDAPADMIN_HTTPS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --detach "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    osixia/phpldapadmin:"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${PHPLDAPADMIN}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-----------------------------------"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PHPLDAP_IP")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" inspect -f "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{{ .NetworkSettings.IPAddress }}"')]),s._v(" $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("SERVICE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${SERVICE}")]),s._v(" ldapsearch -x -H ldap://"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${PHPLDAP_IP}")]),s._v(":389 -b "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dc='),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${LDAP_DC}")]),s._v(",dc="),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${LDAP_DC_ORG}")]),s._v('"')]),s._v(" -D "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cn=admin,dc='),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${LDAP_DC}")]),s._v(",dc="),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${LDAP_DC_ORG}")]),s._v('"')]),s._v(" -w "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${PASSWORD}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-----------------------------------"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PUB_IP")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ifconfig")]),s._v(" $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("NETWORK_ADAPTER"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"inet"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{print $2}'")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Go to: https://'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${PUB_IP}")]),s._v(":"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${HTTPS_PORT}")]),s._v('"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Login DN: cn=admin,dc='),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${LDAP_DC}")]),s._v(",dc="),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${LDAP_DC_ORG}")]),s._v('"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Password: '),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${PASSWORD}")]),s._v('"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br")]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br")])]),a("p",[s._v("创建完成之后，即可投入使用。")]),s._v(" "),a("p",[s._v("本文介绍了服务端的部署流程，日常我们管理的时候，可以通过这种命令行的方式进行管理，不过事实上大多时候，大家更习惯于在ldap对应的web管理端进行配置，所以下一篇文章将介绍web管理端的部署配置，并介绍如何开放出一种用户自助更改密码的方案。")])])}),[],!1,null,null,null);a.default=e.exports}}]);